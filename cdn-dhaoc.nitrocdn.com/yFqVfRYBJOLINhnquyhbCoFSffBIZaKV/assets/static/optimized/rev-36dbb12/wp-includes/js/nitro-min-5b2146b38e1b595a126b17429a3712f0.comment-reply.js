window.addComment=function(y){var p=y.document;var I={commentReplyClass:"comment-reply-link",commentReplyTitleId:"reply-title",cancelReplyId:"cancel-comment-reply-link",commentFormId:"commentform",temporaryFormId:"wp-temp-form-div",parentIdFieldId:"comment_parent",postIdFieldId:"comment_post_ID"};var t=y.MutationObserver||y.WebKitMutationObserver||y.MozMutationObserver;var d="querySelector"in p&&"addEventListener"in y;var n=!!p.documentElement.dataset;var C;var h;var E;var r;if(d&&p.readyState!=="loading"){e()}else if(d){y.addEventListener("DOMContentLoaded",e,false)}function e(){i();a()}function i(e){if(!d){return}C=b(I.cancelReplyId);h=b(I.commentFormId);if(!C){return}C.addEventListener("touchstart",l);C.addEventListener("click",l);var t=function(e){if((e.metaKey||e.ctrlKey)&&e.keyCode===13){h.removeEventListener("keydown",t);e.preventDefault();h.submit.click();return false}};if(h){h.addEventListener("keydown",t)}var n=o(e);var r;for(var i=0,a=n.length;i<a;i++){r=n[i];r.addEventListener("touchstart",m);r.addEventListener("click",m)}}function o(e){var t=I.commentReplyClass;var n;if(!e||!e.childNodes){e=p}if(p.getElementsByClassName){n=e.getElementsByClassName(t)}else{n=e.querySelectorAll("."+t)}return n}function l(e){var t=this;var n=I.temporaryFormId;var r=b(n);if(!r||!E){return}b(I.parentIdFieldId).value="0";var i=r.textContent;r.parentNode.replaceChild(E,r);t.style.display="none";var a=b(I.commentReplyTitleId);var d=a&&a.firstChild;var o=d&&d.nextSibling;if(d&&d.nodeType===Node.TEXT_NODE&&i){if(o&&"A"===o.nodeName&&o.id!==I.cancelReplyId){o.style.display=""}d.textContent=i}e.preventDefault()}function m(e){var t=b(I.commentReplyTitleId);var n=t&&t.firstChild.textContent;var r=this,i=f(r,"belowelement"),a=f(r,"commentid"),d=f(r,"respondelement"),o=f(r,"postid"),l=f(r,"replyto")||n,m;if(!i||!a||!d||!o){return}m=y.addComment.moveForm(i,a,d,o,l);if(false===m){e.preventDefault()}}function a(){if(!t){return}var e={childList:true,subtree:true};r=new t(s);r.observe(p.body,e)}function s(e){var t=e.length;while(t--){if(e[t].addedNodes.length){i();return}}}function f(e,t){if(n){return e.dataset[t]}else{return e.getAttribute("data-"+t)}}function b(e){return p.getElementById(e)}function c(e,t,n,r,i){var a=b(e);E=b(n);var d=b(I.parentIdFieldId);var o=b(I.postIdFieldId);var l,m,s;var f=b(I.commentReplyTitleId);var c=f&&f.firstChild;var v=c&&c.nextSibling;if(!a||!E||!d){return}if("undefined"===typeof i){i=c&&c.textContent}g(E);if(r&&o){o.value=r}d.value=t;C.style.display="";a.parentNode.insertBefore(E,a.nextSibling);if(c&&c.nodeType===Node.TEXT_NODE){if(v&&"A"===v.nodeName&&v.id!==I.cancelReplyId){v.style.display="none"}c.textContent=i}C.onclick=function(){return false};try{for(var u=0;u<h.elements.length;u++){l=h.elements[u];m=false;if("getComputedStyle"in y){s=y.getComputedStyle(l)}else if(p.documentElement.currentStyle){s=l.currentStyle}if(l.offsetWidth<=0&&l.offsetHeight<=0||s.visibility==="hidden"){m=true}if("hidden"===l.type||l.disabled||m){continue}l.focus();break}}catch(e){}return false}function g(e){var t=I.temporaryFormId;var n=b(t);var r=b(I.commentReplyTitleId);var i=r?r.firstChild.textContent:"";if(n){return}n=p.createElement("div");n.id=t;n.style.display="none";n.textContent=i;e.parentNode.insertBefore(n,e)}return{init:i,moveForm:c}}(window);